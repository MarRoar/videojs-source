# video.js源码解析（一）-- component.js
这一篇主要说一下源码的逻辑结构，还有源码里面涉及到一些工具函数，其中最主要的说一下 component.js 源码。因为Component这个类是源码里面很多类都继承的。所以有必要先说一下这个类，方便下一步的学习。

## 目录
1. video.js 的源码逻辑
2. 一些工具函数
  - mergeOptions
  - dom
  - evented
3. component.js的源码

## video.js 的源码逻辑
如果产品让你做一个播放器，你会怎么设计代码的结构呢？当然这个问题可以自己想一下。那么接下来就说一下video.js 源码的结构。
打开组件的源码文件，首先肯定是知道各个文件都是干啥的，搞清楚各个文件的作用，然后根据逻辑，把每一个文件关联起来，然后再提炼出代码的框架，我在第一遍看源码的时候就是这个思路。
这个源码的结构从整体来说分三层 video <=> tech <=> player 说一下这三层的含义
1. video 就是组件暴露出来给我们使用的那一层。
2. tech 是中间件，初始化播放器的时候，tech这一部分会根据判断来使用 h5播放器或者 flash播放器。
3. player 这一层就是控制我们播放的那一部分。

我用一个例子来说明一下这个框架。 /sample-vjs/02-chapter/on-demo 

相信大家应该都听过框架的含义就是分层，这个播放器分了三层。因为无论是video标签播放，或者是用 flash播放。播放控件(按钮，进度条...)应该是一样的。所以应该有一次层是来定时和展示这些播放控件，也就是 player。 
控件初始化完了，就需要把这些控件和播放容器关联，因为有可能是不容的容器，那么这个时候就需要一个中间件，也就是Tech，在Tech里面定义的播放事件和Player组件里面定义的一样，那么就可以把这两层关联上。
另外暴露出来video就是给用户使用的那一层。
这个就是播放器主要的三个部分。
大致的代码框架有了，接下来就是对每一部分进行详细的解释就行。当然了，每一部分也有他自己逻辑顺序可以先看一下 player.xmind 这里面是 就是播放器控件的接结构。


## 一些工具函数
因为在Component类里面用到了一些工具函数，所以在讲 Component之前先说几个工具函数。

- ### mergeOption
  utils/merge-option.js 深拷贝对象，这个方法比较常用， video.js 的作者用的是递归的方法。涉及到的知识点有1.递归、2.扩展符(...)、3.是否是对象判断。这个可以看sample-vjs/02-chapter/02-merge 里面的例子。

- ### dom操作
这一部分就是一些dom标签相关的操作，有用到的时候看一下就可以了。

- ### evented
在 Component 类里面，93 行里面 有个 evented() 这个方法就是给 Component 类添加一些方法，on()、one()、any()、off()、trigger() 


  